<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EcoSort Challenge - Learn Waste Sorting</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
        }

        .game-container {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            max-width: 1200px;
            width: 95%;
            box-shadow: 0 8px 32px rgba(31, 38, 135, 0.37);
            border: 1px solid rgba(255, 255, 255, 0.18);
            color: #333;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
        }

        .header p {
            color: #7f8c8d;
            font-size: 1.1rem;
        }

        .game-instructions {
            background: rgba(52, 152, 219, 0.1);
            padding: 15px;
            border-radius: 10px;
            margin-top: 15px;
        }

        .game-instructions p {
            color: #2c3e50;
            font-size: 1rem;
            margin: 5px 0;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
            color: #2c3e50;
        }

        .game-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            font-size: 1.2rem;
            font-weight: bold;
            color: #2c3e50;
        }

        .current-item {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            margin-bottom: 30px;
            min-height: 100px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
            font-weight: bold;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
        }

        .bins-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            grid-template-rows: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        .bin {
            background: rgba(52, 152, 219, 0.1);
            border: 3px solid transparent;
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            min-height: 150px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: #2c3e50;
        }

        .bin:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
        }

        .bin.correct {
            border-color: #4CAF50;
            background: rgba(76, 175, 80, 0.3);
        }

        .bin.incorrect {
            border-color: #f44336;
            background: rgba(244, 67, 54, 0.3);
        }

        .garbage { border-color: #757575; }
        .recycling { border-color: #2196F3; }
        .hazardous { border-color: #FF9800; }
        .compost { border-color: #4CAF50; }

        .bin-icon {
            font-size: 3rem;
            margin-bottom: 10px;
        }

        .bin-title {
            font-size: 1.4rem;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .bin-description {
            font-size: 0.9rem;
            opacity: 0.8;
        }

        .controls {
            text-align: center;
            margin-top: 20px;
        }

        .btn {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            border: 2px solid rgba(79, 172, 254, 0.3);
            color: white;
            padding: 12px 25px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1rem;
            margin: 0 10px;
            transition: all 0.3s ease;
            font-weight: bold;
        }

        .btn:hover {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .feedback {
            text-align: center;
            margin: 20px 0;
            font-size: 1.2rem;
            font-weight: bold;
            min-height: 30px;
            color: #2c3e50;
        }

        .correct-feedback {
            color: #4CAF50;
        }

        .incorrect-feedback {
            color: #f44336;
        }

        .level-complete {
            background: rgba(76, 175, 80, 0.9);
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            margin: 20px 0;
        }

        .game-complete {
            background: rgba(255, 215, 0, 0.9);
            color: #333;
            padding: 40px;
            border-radius: 15px;
            text-align: center;
            margin: 20px 0;
        }

        .hidden {
            display: none;
        }

        .progress-bar {
            background: rgba(52, 152, 219, 0.2);
            height: 10px;
            border-radius: 5px;
            margin: 20px 0;
            overflow: hidden;
        }

        .progress-fill {
            background: #4CAF50;
            height: 100%;
            transition: width 0.3s ease;
        }

        @media (max-width: 768px) {
            .game-container {
                padding: 20px;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .current-item {
                font-size: 1.4rem;
            }
            
            .bins-container {
                grid-template-columns: 1fr 1fr;
                gap: 15px;
                max-width: 400px;
            }
            
            .bin {
                padding: 15px;
                min-height: 120px;
            }
            
            .bin-icon {
                font-size: 2.5rem;
            }
            
            .bin-title {
                font-size: 1.2rem;
            }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <div class="header">
            <h1>üåç EcoSort Challenge</h1>
            <p>Learn proper waste sorting to protect our environment!</p>
            <div class="game-instructions">
                <p><strong>How to Play:</strong> Look at each item and click the correct bin where it belongs. You'll get instant feedback to help you learn!</p>
                <p><strong>Goal:</strong> Get 100% correct in each level to advance! Master all 3 levels to become an EcoSort Expert! üèÜ</p>
            </div>
        </div>

        <div class="game-info">
            <div>Score: <span id="score">0</span></div>
            <div>Items Left: <span id="items-left">50</span></div>
        </div>

        <div class="progress-bar">
            <div class="progress-fill" id="progress"></div>
        </div>

        <div class="current-item" id="current-item">
            Click "Start Level" to begin!
        </div>

        <div class="bins-container">
            <div class="bin garbage" onclick="sortItem('garbage')">
                <div class="bin-icon">üóëÔ∏è</div>
                <div class="bin-title">GARBAGE</div>
                <div class="bin-description">Non-recyclable waste</div>
            </div>
            <div class="bin recycling" onclick="sortItem('recycling')">
                <div class="bin-icon">‚ôªÔ∏è</div>
                <div class="bin-title">RECYCLING</div>
                <div class="bin-description">Reusable materials</div>
            </div>
            <div class="bin hazardous" onclick="sortItem('hazardous')">
                <div class="bin-icon">‚ö†Ô∏è</div>
                <div class="bin-title">HAZARDOUS</div>
                <div class="bin-description">Dangerous materials</div>
            </div>
            <div class="bin compost" onclick="sortItem('compost')">
                <div class="bin-icon">üå±</div>
                <div class="bin-title">COMPOST</div>
                <div class="bin-description">Organic waste</div>
            </div>
        </div>

        <div class="feedback" id="feedback"></div>

        <div class="controls">
            <button class="btn" onclick="startLevel()">Start Level</button>
            <button class="btn" onclick="nextLevel()">Next Level</button>
            <button class="btn" onclick="showInstructions()">Instructions</button>
        </div>

        <div class="game-info" style="margin-top: 20px; justify-content: center;">
            <div style="font-size: 1.4rem; font-weight: bold; color: #2c3e50;">Level: <span id="current-level">1</span></div>
        </div>

        <div id="level-complete" class="level-complete hidden">
            <h2 id="level-complete-title">üéâ Level Complete!</h2>
            <p id="level-complete-message">Great job! You've mastered this level.</p>
            <p>Final Score: <span id="level-score"></span></p>
            <p id="next-level-instruction"></p>
        </div>

        <div id="game-complete" class="game-complete hidden">
            <h2>üèÜ Congratulations!</h2>
            <p>You've completed all levels and become an EcoSort Expert!</p>
            <p>Total Score: <span id="final-score"></span></p>
            <p>You're now ready to help others sort waste properly and protect our environment!</p>
        </div>
    </div>

    <script>
        // Game data - 3 levels: Beginner, Intermediate, and Advanced
        const gameData = {
            1: { // Beginner Level
                name: "Beginner",
                items: [
                    {name: "Plastic Water Bottle", category: "recycling", emoji: "üçº", explanation: "Clean plastic bottles can be recycled"},
                    {name: "Banana Peel", category: "compost", emoji: "üçå", explanation: "Fruit peels decompose naturally"},
                    {name: "AA Battery", category: "hazardous", emoji: "üîã", explanation: "Batteries contain toxic chemicals"},
                    {name: "Candy Wrapper", category: "garbage", emoji: "üç¨", explanation: "Mixed material wrappers can't be recycled"},
                    {name: "Aluminum Can", category: "recycling", emoji: "ü•§", explanation: "Aluminum is highly recyclable"},
                    {name: "Coffee Grounds", category: "compost", emoji: "‚òï", explanation: "Coffee grounds are great for composting"},
                    {name: "Used Tissue", category: "garbage", emoji: "ü§ß", explanation: "Contaminated paper products go to garbage"},
                    {name: "Glass Jar", category: "recycling", emoji: "ü´ô", explanation: "Clean glass containers are recyclable"},
                    {name: "Apple Core", category: "compost", emoji: "üçé", explanation: "Fruit waste decomposes naturally"},
                    {name: "Chip Bag", category: "garbage", emoji: "üçü", explanation: "Metallized plastic bags aren't recyclable"},
                    {name: "Pizza Box (Clean)", category: "recycling", emoji: "üì¶", explanation: "Clean cardboard pizza boxes can be recycled"},
                    {name: "Pizza Box (Greasy)", category: "garbage", emoji: "üçï", explanation: "Grease-stained cardboard can't be recycled"},
                    {name: "Eggshells", category: "compost", emoji: "ü•ö", explanation: "Eggshells add calcium to compost"},
                    {name: "Plastic Bag", category: "garbage", emoji: "üõçÔ∏è", explanation: "Most plastic bags aren't recyclable in regular bins"},
                    {name: "Newspaper", category: "recycling", emoji: "üì∞", explanation: "Clean paper is easily recyclable"}
                ]
            },
            2: { // Intermediate Level
                name: "Intermediate",
                items: [
                    {name: "LED Light Bulb", category: "hazardous", emoji: "üí°", explanation: "Electronic components need special disposal"},
                    {name: "Vegetable Scraps", category: "compost", emoji: "ü•ï", explanation: "Vegetable waste is perfect for composting"},
                    {name: "Broken Glass", category: "hazardous", emoji: "üîª", explanation: "Sharp broken glass needs careful disposal"},
                    {name: "Cardboard Box", category: "recycling", emoji: "üì¶", explanation: "Clean cardboard is highly recyclable"},
                    {name: "Tea Bag", category: "compost", emoji: "üçµ", explanation: "Most tea bags are compostable"},
                    {name: "Smartphone", category: "hazardous", emoji: "üì±", explanation: "Electronics contain valuable but toxic materials"},
                    {name: "Yard Trimmings", category: "compost", emoji: "üåø", explanation: "Grass and leaves compost well"},
                    {name: "Styrofoam Container", category: "garbage", emoji: "üì¶", explanation: "Styrofoam isn't recyclable in most areas"},
                    {name: "Wine Bottle", category: "recycling", emoji: "üç∑", explanation: "Glass bottles are infinitely recyclable"},
                    {name: "Motor Oil", category: "hazardous", emoji: "üõ¢Ô∏è", explanation: "Used oil must be disposed of properly"},
                    {name: "Food-stained Paper Plate", category: "garbage", emoji: "üçΩÔ∏è", explanation: "Contaminated paper products go to garbage"},
                    {name: "Dryer Lint", category: "compost", emoji: "üßµ", explanation: "Natural fiber lint can be composted"},
                    {name: "Prescription Medication", category: "hazardous", emoji: "üíä", explanation: "Drugs can contaminate water supplies"},
                    {name: "Clean Aluminum Foil", category: "recycling", emoji: "üìÑ", explanation: "Clean foil can be recycled"},
                    {name: "Pet Waste", category: "garbage", emoji: "üêï", explanation: "Animal waste spreads disease in compost"}
                ]
            },
            3: { // Advanced Level
                name: "Advanced",
                items: [
                    {name: "Computer Monitor", category: "hazardous", emoji: "üñ•Ô∏è", explanation: "Contains lead and other toxic materials"},
                    {name: "Moldy Bread", category: "compost", emoji: "üçû", explanation: "Moldy food is still compostable"},
                    {name: "Ceramic Mug", category: "garbage", emoji: "‚òï", explanation: "Ceramics don't melt at recycling temperatures"},
                    {name: "Steel Can", category: "recycling", emoji: "ü•´", explanation: "Steel is magnetic and easily recyclable"},
                    {name: "Paint Can (Empty)", category: "hazardous", emoji: "üé®", explanation: "Paint residue is toxic"},
                    {name: "Nutshells", category: "compost", emoji: "ü•ú", explanation: "Hard shells decompose slowly but surely"},
                    {name: "Ink Cartridge", category: "hazardous", emoji: "üñ®Ô∏è", explanation: "Contains chemicals and plastics"},
                    {name: "Wax Paper", category: "garbage", emoji: "üìÑ", explanation: "Wax coating prevents recycling"},
                    {name: "Hair Clippings", category: "compost", emoji: "üíá", explanation: "Natural hair decomposes well"},
                    {name: "Compact Fluorescent Bulb", category: "hazardous", emoji: "üí°", explanation: "Contains mercury"},
                    {name: "Car Battery", category: "hazardous", emoji: "üîã", explanation: "Contains lead and acid"},
                    {name: "Sawdust", category: "compost", emoji: "ü™µ", explanation: "Untreated wood waste composts well"},
                    {name: "Thermal Receipt Paper", category: "garbage", emoji: "üßæ", explanation: "Thermal coating contains BPA"},
                    {name: "Steel Wool", category: "garbage", emoji: "üßΩ", explanation: "Fine metal fibers jam recycling equipment"},
                    {name: "X-ray Film", category: "hazardous", emoji: "ü©ª", explanation: "Contains silver and chemicals"}
                ]
            }
        };

        // Additional items for variety (expanding to 300+ items total)
        const additionalItems = [
            // More Recycling items
            {name: "Tin Can", category: "recycling", emoji: "ü•´", explanation: "Metal cans are highly recyclable"},
            {name: "Plastic Yogurt Container", category: "recycling", emoji: "ü•õ", explanation: "Clean plastic containers are recyclable"},
            {name: "Magazine", category: "recycling", emoji: "üìñ", explanation: "Glossy paper is recyclable"},
            {name: "Cereal Box", category: "recycling", emoji: "üì¶", explanation: "Cardboard packaging is recyclable"},
            {name: "Glass Bottle", category: "recycling", emoji: "üçº", explanation: "Glass is infinitely recyclable"},
            {name: "Paper Bag", category: "recycling", emoji: "üìÑ", explanation: "Clean paper bags are recyclable"},
            {name: "Plastic Bottle Cap", category: "recycling", emoji: "üîò", explanation: "Small plastic caps are now recyclable"},
            {name: "Steel Spoon", category: "recycling", emoji: "ü•Ñ", explanation: "Metal utensils are recyclable"},
            {name: "Wire Coat Hanger", category: "recycling", emoji: "ü™ù", explanation: "Metal hangers are recyclable"},
            {name: "Phone Book", category: "recycling", emoji: "üìû", explanation: "Bulk paper is recyclable"},
            {name: "Milk Carton", category: "recycling", emoji: "ü•õ", explanation: "Paper cartons are recyclable"},
            {name: "Plastic Shampoo Bottle", category: "recycling", emoji: "üß¥", explanation: "Clean plastic bottles are recyclable"},
            {name: "Metal Lid", category: "recycling", emoji: "ü•´", explanation: "Metal lids can be recycled with cans"},
            {name: "Office Paper", category: "recycling", emoji: "üìÑ", explanation: "Clean office paper is highly recyclable"},
            {name: "Juice Box", category: "recycling", emoji: "üßÉ", explanation: "Many juice boxes are now recyclable"},
            {name: "Copper Wire", category: "recycling", emoji: "üîå", explanation: "Copper is valuable for recycling"},
            {name: "Plastic Food Container", category: "recycling", emoji: "üì¶", explanation: "Clean plastic containers are recyclable"},
            {name: "Glass Pickle Jar", category: "recycling", emoji: "ü´ô", explanation: "Glass jars are infinitely recyclable"},
            {name: "Aluminum Pie Plate", category: "recycling", emoji: "ü•ß", explanation: "Aluminum is highly recyclable"},
            {name: "Wrapping Paper", category: "recycling", emoji: "üéÅ", explanation: "Plain wrapping paper can be recycled"},
            
            // More Compost items
            {name: "Orange Peels", category: "compost", emoji: "üçä", explanation: "Citrus peels compost well"},
            {name: "Onion Skins", category: "compost", emoji: "üßÖ", explanation: "Vegetable peels are perfect for compost"},
            {name: "Potato Peels", category: "compost", emoji: "ü•î", explanation: "Root vegetable peels decompose quickly"},
            {name: "Corn Husks", category: "compost", emoji: "üåΩ", explanation: "Plant materials make excellent compost"},
            {name: "Watermelon Rinds", category: "compost", emoji: "üçâ", explanation: "Fruit rinds add moisture to compost"},
            {name: "Pumpkin", category: "compost", emoji: "üéÉ", explanation: "Large fruits compost well when chopped"},
            {name: "Lettuce Leaves", category: "compost", emoji: "ü•¨", explanation: "Leafy greens decompose quickly"},
            {name: "Grass Clippings", category: "compost", emoji: "üå±", explanation: "Fresh grass adds nitrogen to compost"},
            {name: "Dead Flowers", category: "compost", emoji: "ü•Ä", explanation: "Organic plant matter composts well"},
            {name: "Wood Shavings", category: "compost", emoji: "ü™µ", explanation: "Natural wood adds carbon to compost"},
            {name: "Fallen Leaves", category: "compost", emoji: "üçÇ", explanation: "Leaves are excellent brown compost material"},
            {name: "Broccoli Stems", category: "compost", emoji: "ü•¶", explanation: "Vegetable scraps decompose well"},
            {name: "Pear Core", category: "compost", emoji: "üçê", explanation: "Fruit cores add nutrients to compost"},
            {name: "Celery Ends", category: "compost", emoji: "ü•¨", explanation: "Vegetable trimmings are perfect for compost"},
            {name: "Avocado Pit", category: "compost", emoji: "ü•ë", explanation: "Hard pits decompose slowly but completely"},
            {name: "Cucumber Peels", category: "compost", emoji: "ü•í", explanation: "Vegetable peels break down quickly"},
            {name: "Carrot Tops", category: "compost", emoji: "ü•ï", explanation: "Green vegetable parts add nitrogen"},
            {name: "Strawberry Tops", category: "compost", emoji: "üçì", explanation: "Berry tops compost easily"},
            {name: "Pine Needles", category: "compost", emoji: "üå≤", explanation: "Acidic materials balance compost pH"},
            {name: "Paper Towel (Unused)", category: "compost", emoji: "üßª", explanation: "Clean paper products can be composted"},
            
            // More Hazardous items
            {name: "Thermometer", category: "hazardous", emoji: "üå°Ô∏è", explanation: "Contains mercury or other chemicals"},
            {name: "Nail Polish", category: "hazardous", emoji: "üíÖ", explanation: "Contains toxic solvents"},
            {name: "Pesticide Container", category: "hazardous", emoji: "üß™", explanation: "Chemical residue is dangerous"},
            {name: "Antifreeze", category: "hazardous", emoji: "üöó", explanation: "Highly toxic to animals and humans"},
            {name: "Lighter Fluid", category: "hazardous", emoji: "üî•", explanation: "Flammable chemicals are hazardous"},
            {name: "Pool Chemicals", category: "hazardous", emoji: "üèä", explanation: "Pool chemicals are corrosive"},
            {name: "Old Fire Extinguisher", category: "hazardous", emoji: "üßØ", explanation: "Contains pressurized chemicals"},
            {name: "Propane Tank", category: "hazardous", emoji: "‚õΩ", explanation: "Pressurized gas containers are dangerous"},
            {name: "Medical Waste", category: "hazardous", emoji: "ü©∫", explanation: "Biological waste needs special handling"},
            {name: "Fluorescent Tube", category: "hazardous", emoji: "üí°", explanation: "Contains mercury vapor"},
            {name: "Cleaning Chemicals", category: "hazardous", emoji: "üßΩ", explanation: "Household cleaners contain toxic substances"},
            {name: "Old Tablet", category: "hazardous", emoji: "üì±", explanation: "Electronic devices contain hazardous materials"},
            {name: "Printer Toner", category: "hazardous", emoji: "üñ®Ô∏è", explanation: "Toner cartridges contain chemicals"},
            {name: "Oven Cleaner", category: "hazardous", emoji: "üßΩ", explanation: "Caustic cleaners are hazardous"},
            {name: "Drain Cleaner", category: "hazardous", emoji: "üöø", explanation: "Chemical drain cleaners are corrosive"},
            {name: "Old Headphones", category: "hazardous", emoji: "üéß", explanation: "Electronic components need special disposal"},
            {name: "Spot Remover", category: "hazardous", emoji: "üßΩ", explanation: "Chemical solvents are toxic"},
            {name: "Rust Remover", category: "hazardous", emoji: "üîß", explanation: "Acid-based cleaners are dangerous"},
            {name: "Wood Stain", category: "hazardous", emoji: "ü™µ", explanation: "Stains contain volatile organic compounds"},
            {name: "Car Wax", category: "hazardous", emoji: "üöó", explanation: "Automotive chemicals need special disposal"},
            
            // More Garbage items
            {name: "Bubble Wrap", category: "garbage", emoji: "üì¶", explanation: "Plastic film isn't recyclable curbside"},
            {name: "Rubber Gloves", category: "garbage", emoji: "üß§", explanation: "Rubber products aren't recyclable"},
            {name: "Tissue Paper", category: "garbage", emoji: "üéÅ", explanation: "Thin paper fibers are too short to recycle"},
            {name: "Stickers", category: "garbage", emoji: "üè∑Ô∏è", explanation: "Adhesive materials contaminate recycling"},
            {name: "Laminated Paper", category: "garbage", emoji: "üìÑ", explanation: "Plastic coating prevents recycling"},
            {name: "Carbon Paper", category: "garbage", emoji: "üìÑ", explanation: "Chemical coating isn't recyclable"},
            {name: "Photographs", category: "garbage", emoji: "üì∑", explanation: "Photo chemicals prevent recycling"},
            {name: "Diaper", category: "garbage", emoji: "üë∂", explanation: "Sanitary products go to garbage"},
            {name: "Cigarette Butt", category: "garbage", emoji: "üö¨", explanation: "Filters contain toxic chemicals"},
            {name: "Chewing Gum", category: "garbage", emoji: "üç¨", explanation: "Synthetic materials don't decompose"},
            {name: "Candy Bar Wrapper", category: "garbage", emoji: "üç´", explanation: "Metallized wrappers can't be recycled"},
            {name: "Plastic Utensils", category: "garbage", emoji: "üç¥", explanation: "Most plastic utensils aren't recyclable"},
            {name: "Packing Peanuts", category: "garbage", emoji: "üì¶", explanation: "Styrofoam peanuts aren't recyclable"},
            {name: "Duct Tape", category: "garbage", emoji: "üîß", explanation: "Adhesive tape can't be recycled"},
            {name: "Bandages", category: "garbage", emoji: "ü©π", explanation: "Medical adhesives go to garbage"},
            {name: "Cat Litter", category: "garbage", emoji: "üê±", explanation: "Clay litter and waste go to garbage"},
            {name: "Vacuum Bag", category: "garbage", emoji: "üè†", explanation: "Dust-filled bags go to garbage"},
            {name: "Dryer Sheets", category: "garbage", emoji: "üëï", explanation: "Chemical-treated sheets aren't recyclable"},
            {name: "Toothbrush", category: "garbage", emoji: "ü¶∑", explanation: "Mixed plastic materials can't be recycled"},
            {name: "Q-tips", category: "garbage", emoji: "üëÇ", explanation: "Small mixed-material items go to garbage"},
            
            // Additional items to reach 50 per level
            {name: "Broken CD", category: "garbage", emoji: "üíø", explanation: "CDs contain mixed materials that can't be recycled"},
            {name: "Used Coffee Filter", category: "compost", emoji: "‚òï", explanation: "Paper filters and coffee grounds compost well"},
            {name: "Shredded Paper", category: "recycling", emoji: "üìÑ", explanation: "Most shredded paper can still be recycled"},
            {name: "Old Mouse", category: "hazardous", emoji: "üñ±Ô∏è", explanation: "Computer peripherals contain electronic components"},
            {name: "Pill Bottle", category: "recycling", emoji: "üíä", explanation: "Clean plastic prescription bottles are recyclable"},
            {name: "Moldy Cheese", category: "compost", emoji: "üßÄ", explanation: "Moldy dairy can be composted in small amounts"},
            {name: "Fishing Line", category: "garbage", emoji: "üé£", explanation: "Synthetic fishing line doesn't decompose"},
            {name: "Old Keyboard", category: "hazardous", emoji: "‚å®Ô∏è", explanation: "Electronic devices need special disposal"},
            {name: "Meat Bones", category: "garbage", emoji: "ü¶¥", explanation: "Bones attract pests and don't compost well at home"},
            {name: "Wine Cork", category: "compost", emoji: "üç∑", explanation: "Natural cork is compostable"},
            {name: "Pizza Crust", category: "compost", emoji: "üçï", explanation: "Bread products decompose naturally"},
            {name: "Staples", category: "recycling", emoji: "üìé", explanation: "Small metal pieces are recyclable with paper"},
            {name: "Latex Balloon", category: "garbage", emoji: "üéà", explanation: "Latex balloons pose environmental hazards"},
            {name: "Ketchup Packet", category: "garbage", emoji: "üçÖ", explanation: "Small condiment packets can't be recycled"},
            {name: "Old Sponge", category: "garbage", emoji: "üßΩ", explanation: "Synthetic sponges aren't biodegradable"},
            {name: "Paper Napkin (Used)", category: "compost", emoji: "üçΩÔ∏è", explanation: "Used paper napkins can be composted"},
            {name: "Aluminum Foil (Dirty)", category: "garbage", emoji: "üìÑ", explanation: "Food-contaminated foil can't be recycled"},
            {name: "Cotton Balls", category: "compost", emoji: "ü§ç", explanation: "Natural cotton is biodegradable"},
            {name: "Plastic Wrap", category: "garbage", emoji: "üì¶", explanation: "Plastic film isn't recyclable in regular bins"},
            {name: "Pencil Shavings", category: "compost", emoji: "‚úèÔ∏è", explanation: "Wood shavings decompose naturally"}
        ];

        // Distribute additional items across levels without repetition to reach 50 items per level
        let distributedItems = [...additionalItems]; // Create a copy to avoid modifying original
        let currentIndex = 0;

        for (let level = 1; level <= 3; level++) {
            const itemsNeeded = 50 - gameData[level].items.length;
            
            for (let i = 0; i < itemsNeeded && currentIndex < distributedItems.length; i++) {
                gameData[level].items.push(distributedItems[currentIndex]);
                currentIndex++;
            }
        }

        // Log total items for verification
        console.log(`Total unique items available: ${45 + additionalItems.length}`);
        console.log(`Level 1 items: ${gameData[1].items.length}`);
        console.log(`Level 2 items: ${gameData[2].items.length}`);
        console.log(`Level 3 items: ${gameData[3].items.length}`);

        // Game state
        let currentLevel = 1;
        let currentScore = 0;
        let currentItemIndex = 0;
        let levelItems = [];
        let gameStarted = false;
        let levelComplete = false;
        let correctAnswers = 0;
        let totalAnswers = 0;

        // DOM elements
        const currentItemEl = document.getElementById('current-item');
        const currentLevelEl = document.getElementById('current-level');
        const scoreEl = document.getElementById('score');
        const itemsLeftEl = document.getElementById('items-left');
        const feedbackEl = document.getElementById('feedback');
        const progressEl = document.getElementById('progress');
        const levelCompleteEl = document.getElementById('level-complete');
        const gameCompleteEl = document.getElementById('game-complete');

        function shuffleArray(array) {
            const shuffled = [...array];
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }
            return shuffled;
        }

        function startLevel() {
            if (currentLevel > 3) {
                showGameComplete();
                return;
            }

            gameStarted = true;
            levelComplete = false;
            currentItemIndex = 0;
            correctAnswers = 0;
            totalAnswers = 0;
            levelItems = shuffleArray(gameData[currentLevel].items);
            
            levelCompleteEl.classList.add('hidden');
            gameCompleteEl.classList.add('hidden');
            
            updateDisplay();
            showNextItem();
        }

        function showNextItem() {
            if (currentItemIndex >= levelItems.length) {
                showLevelComplete();
                return;
            }

            const item = levelItems[currentItemIndex];
            currentItemEl.innerHTML = `<div style="font-size: 3rem; margin-bottom: 10px;">${item.emoji}</div><div>${item.name}</div>`;
            feedbackEl.textContent = '';
            clearBinHighlights();
        }

        function sortItem(binType) {
            if (!gameStarted || levelComplete) return;

            const currentItem = levelItems[currentItemIndex];
            const isCorrect = currentItem.category === binType;
            totalAnswers++;

            if (isCorrect) {
                correctAnswers++;
                currentScore += 10;
                feedbackEl.textContent = `‚úÖ Correct! ${currentItem.explanation}`;
                feedbackEl.className = 'feedback correct-feedback';
                highlightBin(binType, 'correct');
            } else {
                feedbackEl.textContent = `‚ùå Incorrect. ${currentItem.explanation}`;
                feedbackEl.className = 'feedback incorrect-feedback';
                highlightBin(binType, 'incorrect');
            }

            currentItemIndex++;
            updateDisplay();

            setTimeout(() => {
                showNextItem();
            }, 4500);
        }

        function highlightBin(binType, result) {
            clearBinHighlights();
            const bin = document.querySelector(`.bin.${binType}`);
            bin.classList.add(result);
        }

        function clearBinHighlights() {
            document.querySelectorAll('.bin').forEach(bin => {
                bin.classList.remove('correct', 'incorrect');
            });
        }

        function updateDisplay() {
            currentLevelEl.textContent = `${currentLevel} (${gameData[currentLevel].name})`;
            scoreEl.textContent = currentScore;
            itemsLeftEl.textContent = Math.max(0, levelItems.length - currentItemIndex);
            
            const progress = (currentItemIndex / levelItems.length) * 100;
            progressEl.style.width = `${progress}%`;
        }

        function showLevelComplete() {
            levelComplete = true;
            const accuracy = Math.round((correctAnswers / totalAnswers) * 100);
            
            if (correctAnswers === totalAnswers) {
                // Perfect score - can advance
                currentItemEl.innerHTML = "Perfect! Level Complete! üéâ";
                feedbackEl.innerHTML = `<div style="color: #4CAF50; font-size: 1.3rem;">üåü Excellent! You got all ${totalAnswers} items correct!</div>`;
                document.getElementById('level-score').innerHTML = `${currentScore} points<br><span style="color: #4CAF50;">Perfect Score: ${accuracy}%</span>`;
                document.getElementById('level-complete-title').textContent = "üéâ Level Complete!";
                document.getElementById('level-complete-message').textContent = "Perfect! You've mastered this level.";
                if (currentLevel < 3) {
                    document.getElementById('next-level-instruction').innerHTML = '<strong>Click "Next Level" to advance!</strong>';
                } else {
                    document.getElementById('next-level-instruction').innerHTML = '<strong>Click "Next Level" to see final results!</strong>';
                }
            } else {
                // Not perfect - must retry
                currentItemEl.innerHTML = "Level Not Passed üòî";
                feedbackEl.innerHTML = `<div style="color: #f44336; font-size: 1.3rem;">You got ${correctAnswers}/${totalAnswers} correct (${accuracy}%)<br>You need 100% to advance! Try again.</div>`;
                document.getElementById('level-score').innerHTML = `${currentScore} points<br><span style="color: #f44336;">Score: ${accuracy}% - Need 100% to advance</span>`;
                document.getElementById('level-complete-title').textContent = "üòî Level Not Passed";
                document.getElementById('level-complete-message').textContent = "You need 100% correct to advance to the next level.";
                document.getElementById('next-level-instruction').innerHTML = '<strong>Click "Next Level" to try this level again!</strong>';
            }
            
            levelCompleteEl.classList.remove('hidden');
        }

        function nextLevel() {
            if (correctAnswers === totalAnswers) {
                // Only advance if perfect score
                if (currentLevel < 3) {
                    currentLevel++;
                    startLevel();
                } else {
                    showGameComplete();
                }
            } else {
                // Must retry current level
                startLevel();
            }
        }

        function showGameComplete() {
            gameCompleteEl.classList.remove('hidden');
            document.getElementById('final-score').textContent = currentScore;
            currentItemEl.innerHTML = "Congratulations! You're an EcoSort Master! üèÜ";
        }

        function restartGame() {
            currentLevel = 1;
            currentScore = 0;
            currentItemIndex = 0;
            gameStarted = false;
            levelComplete = false;
            
            levelCompleteEl.classList.add('hidden');
            gameCompleteEl.classList.add('hidden');
            
            currentItemEl.innerHTML = "Click 'Start Level' to begin!";
            feedbackEl.textContent = '';
            clearBinHighlights();
            updateDisplay();
        }

        function showInstructions() {
            alert(`üåç EcoSort Challenge Instructions üåç

üéØ GOAL: Sort items into the correct bins to protect our environment!

üóëÔ∏è GARBAGE: Non-recyclable waste that goes to landfills
‚ôªÔ∏è RECYCLING: Clean materials that can be reprocessed
‚ö†Ô∏è HAZARDOUS: Dangerous materials needing special disposal  
üå± COMPOST: Organic waste that can decompose naturally

üìä SCORING:
‚Ä¢ Correct sort: +10 points
‚Ä¢ Learn from explanations when you get items wrong!

üèÜ LEVELS:
‚Ä¢ 3 levels: Beginner ‚Üí Intermediate ‚Üí Advanced
‚Ä¢ Each level has 50 items to sort
‚Ä¢ You MUST get 100% correct to advance to the next level!
‚Ä¢ If you don't get 100%, you'll retry the same level

üí° TIP: Pay close attention to the explanations - they're key to mastering each level!

Ready to become an EcoSort Expert? Perfect scores only! üå±`);
        }

        // Initialize the game
        updateDisplay();
    </script>
</body>
</html>
